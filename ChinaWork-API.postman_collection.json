{
	"info": {
		"_postman_id": "china-work-empleados-resenas",
		"name": "ChinaWork - Empleados y Reseñas API",
		"description": "Colección de endpoints para el microservicio de gestión de empleados y reseñas de China Wok",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Empleados",
			"item": [
				{
					"name": "Crear Empleado",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"local_id\": \"LOCAL001\",\n  \"dni\": \"12345678\",\n  \"nombre\": \"Juan\",\n  \"apellido\": \"Pérez\",\n  \"role\": \"Cocinero\",\n  \"calificacion_prom\": 0,\n  \"sueldo\": 1500\n}"
						},
						"url": {
							"raw": "{{base_url}}/empleados",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"empleados"
							]
						},
						"description": "Crea un nuevo empleado en el sistema. Campos requeridos: local_id, dni, nombre, apellido, role."
					},
					"response": []
				},
				{
					"name": "Obtener Empleado",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/empleados/{{local_id}}/{{dni}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"empleados",
								"{{local_id}}",
								"{{dni}}"
							]
						},
						"description": "Obtiene la información de un empleado específico por local_id y dni."
					},
					"response": []
				},
				{
					"name": "Listar Empleados por Local",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/empleados/local/{{local_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"empleados",
								"local",
								"{{local_id}}"
							]
						},
						"description": "Lista todos los empleados de un local específico."
					},
					"response": []
				},
				{
					"name": "Listar Empleados por Local y Rol",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/empleados/local/{{local_id}}/rol/Cocinero",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"empleados",
								"local",
								"{{local_id}}",
								"rol",
								"Cocinero"
							]
						},
						"description": "Lista empleados filtrados por local y rol. Roles válidos: Cocinero, Despachador, Repartidor."
					},
					"response": []
				},
				{
					"name": "Actualizar Empleado",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"nombre\": \"Juan Carlos\",\n  \"calificacion_prom\": 4.5,\n  \"sueldo\": 1800\n}"
						},
						"url": {
							"raw": "{{base_url}}/empleados/{{local_id}}/{{dni}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"empleados",
								"{{local_id}}",
								"{{dni}}"
							]
						},
						"description": "Actualiza la información de un empleado. Solo se actualizan los campos enviados en el body."
					},
					"response": []
				},
				{
					"name": "Eliminar Empleado",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/empleados/{{local_id}}/{{dni}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"empleados",
								"{{local_id}}",
								"{{dni}}"
							]
						},
						"description": "Elimina un empleado del sistema."
					},
					"response": []
				}
			],
			"description": "Endpoints para la gestión CRUD de empleados"
		},
		{
			"name": "Reseñas",
			"item": [
				{
					"name": "Registrar Reseña de Pedido",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"local_id\": \"LOCAL001\",\n  \"pedido_id\": \"PED123\",\n  \"calificacion\": 5,\n  \"resena\": \"Excelente servicio, comida deliciosa y entrega rápida\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/resenas",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"resenas"
							]
						},
						"description": "Registra una reseña de pedido. Los DNIs de empleados (cocinero, despachador, repartidor) se extraen automáticamente del historial de estados del pedido. Valida que el local y pedido existan en DynamoDB."
					},
					"response": []
				},
				{
					"name": "Obtener Reseñas por Local",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/resenas/local/{{local_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"resenas",
								"local",
								"{{local_id}}"
							]
						},
						"description": "Obtiene todas las reseñas de un local específico."
					},
					"response": []
				},
				{
					"name": "Obtener Reseñas de Empleado",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"rol\": \"cocinero\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/resenas/empleado/{{local_id}}/{{dni}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"resenas",
								"empleado",
								"{{local_id}}",
								"{{dni}}"
							]
						},
						"description": "Obtiene todas las reseñas de un empleado específico. El body puede incluir opcionalmente el campo 'rol' (cocinero, despachador, repartidor). Si no se proporciona, se busca el rol en la tabla de empleados."
					},
					"response": []
				},
				{
					"name": "Actualizar Reseña",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"resena\": \"Servicio excelente, muy recomendado\",\n  \"calificacion\": 5\n}"
						},
						"url": {
							"raw": "{{base_url}}/resenas/{{local_id}}/{{resena_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"resenas",
								"{{local_id}}",
								"{{resena_id}}"
							]
						},
						"description": "Actualiza una reseña específica. Solo se actualizan los campos 'resena' y 'calificacion'."
					},
					"response": []
				},
				{
					"name": "Eliminar Reseña",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/resenas/{{local_id}}/{{resena_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"resenas",
								"{{local_id}}",
								"{{resena_id}}"
							]
						},
						"description": "Elimina una reseña específica del sistema."
					},
					"response": []
				}
			],
			"description": "Endpoints para la gestión de reseñas de pedidos. Ahora con estructura simplificada usando local_id y resena_id como claves."
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "https://your-api-gateway-url.execute-api.us-east-1.amazonaws.com/dev",
			"type": "string"
		},
		{
			"key": "local_id",
			"value": "LOCAL001",
			"type": "string"
		},
		{
			"key": "dni",
			"value": "12345678",
			"type": "string"
		},
		{
			"key": "resena_id",
			"value": "uuid-de-resena",
			"type": "string"
		}
	]
}
